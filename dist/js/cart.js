"use strict";$(function(){$("#one1").hover(function(){$(".nav-currentt").animate({width:176,left:0})},400),$("#one5").hover(function(){$(".nav-currentt").animate({width:194,left:180})},400),$("#one2").hover(function(){$(".nav-currentt").animate({width:137,left:378})},400),$("#one3").hover(function(){$(".nav-currentt").animate({width:137,left:522})},400),$("#one4").hover(function(){$(".nav-currentt").animate({width:139,left:665})},400),$(".cart-menu").mouseleave(function(){$(".nav-currentt").animate({width:176,left:0})},400),$(".place-div").hover(function(){$(".place-hide").css("display","block")},function(){$(".place-hide").css("display","none")});var t=document.getElementsByClassName("bagLi")[0],e=t.children[0],n=document.getElementsByClassName("scart")[0],a=getid("cartbox");t.onmouseenter=function(){e.style.display="block"},t.onmouseleave=function(){e.style.display="none"},n.onmouseenter=function(){a.style.display="block"},n.onmouseleave=function(){a.style.display="none"},window.onscroll=function(){100<=(document.body.scrollTop||document.documentElement.scrollTop)?$("#hdb").css({display:"block"}):$("#hdb").css({display:"none"}),$("#hdb").click(function(){var e=window.setInterval(function(){var t=window.pageYOffset;0<t?window.scrollTo(0,t-1):window.clearInterval(e)},20)})},$(".cart-table b").hover(function(){$(".cart-tc").css("display","block")},function(){$(".cart-tc").css("display","none")});var c=getid("miid");function i(t){var e=(1*t.parent().parent().next().children(".fe").text().substring(1)*(1*t.parent().find(".buynum ").val())).toFixed(2);t.parent().parent().next().children(".ee").html("￥&nbsp;"+e),l()}function s(){0==$(".addnum").size()&&($("#tabb").remove(),$(".kongbai").css("display","block"))}$.ajax({type:"post",data:{APItype:"changdu"},url:"../api/cart.php",success:function(t){1==t?$.ajax({type:"post",data:{APItype:"xuanlan"},url:"../api/cart.php",success:function(t){var e,n=JSON.parse(t);e=n.map(function(t){return'<tr class="cart-order" id="'+t.cid+'">\n            <td width="50" align="center">\n                <input autocomplete="off" type="checkbox" name="check_goods_115032" doclick="check" class="chk">\n            </td>\n            <td width="500" valign="middle">\n                <div class="por-img fl overflow bgwhite ftc">\n                    <a href="javascript:;" target="_blank">\n                        <img src="'+t.img+'" width="80">\n                    </a>\n                </div>\n                <div class="por-intro fl ml20 mt" style="margin-top: 30px;">\n                    <a href="javascript:;" target="_blank" class="c333">\n                        '+t.content+'</a>\n                </div>\n                <div class="clear"></div>\n            </td>\n            <td width="150" align="center" style="padding-top:20px;">\n                <div class="buynum-wrap clearfix">\n                    <span  doclick="changeBuyNum" act="sub" class="ft18 fl less">-</span>\n                    <input autocomplete="off" name="gnum_115032" stock="49" oldnum="1" type="text" class="text buynum ftc fl bgwhite " value="'+t.num+'"\n                         size="2">\n                    <span doclick="changeBuyNum" act="add" class="fl addnum">+</span>\n                </div>\n                <p class="c666 mtneg10"></p>\n            </td>\n            <td width="200" align="center" class="c000 bold ft14">\n                <p class="c000 bold ft14 ee">￥'+(t.price*t.num).toFixed(2)+'</p>\n                <p class="c89 fe">￥'+t.price+'</p></td>\n            <td width="200" align="center">\n                <a href="javascript:;" onclick="Epet.Common.addFavors(115032)" class="c666">[收藏]</a>\n                <a href="javascript:;" doclick="deleteGoods" gid="115032" class="c666 delete">[删除]</a>\n            </td>\n        </tr>'}).join(""),c.innerHTML=e}}):($("#tabb").remove(),$(".kongbai").css("display","block"))}}),$("#tabb").on("input",".buynum",function(){var t=$(this).val();100<=t&&(t=100),t<=1&&(t=1);var e=$(this).parents(".cart-order").attr("id");$(this).val(t),i($(this)),$.ajax({type:"post",data:{APItype:"orderCaNum",shuliang:t,id:e},url:"../api/cart.php"})}),$("#tabb").on("click",".addnum",function(){var t=$(this).prev().val();100<=++t&&(t=100);var e=$(this).parents(".cart-order").attr("id");$(this).prev().val(t),i($(this)),$.ajax({type:"post",data:{APItype:"orderCaNum",shuliang:t,id:e},url:"../api/cart.php"})}),$("#tabb").on("click",".less",function(){var t=$(this).next().val();--t<=1&&(t=1);var e=$(this).parents(".cart-order").attr("id");$(this).next().val(t),i($(this)),$.ajax({type:"post",data:{APItype:"orderCaNum",shuliang:t,id:e},url:"../api/cart.php"})}),$("#tabb").on("click",".delete",function(){var t=$(this).parents(".cart-order").attr("id");confirm("您确定要删除吗？")&&($(this).parent().parent().remove(),$.ajax({type:"post",data:{APItype:"orderCarDelete",id:t},url:"../api/cart.php"}),s(),l())}),$("#tabb").on("click",".chk",function(){l()});var o=[],r=document.getElementsByClassName("cart-tip")[0];function l(){o=[];for(var t=0;t<$(".chk").size();t++)$(".chk").eq(t).prop("checked")&&o.push(t);o.length==$(".chk").size()?($(".all-checkbox").prop("checked","checked"),$(".shopmi").prop("checked","checked")):($(".all-checkbox").removeAttr("checked"),$(".shopmi").removeAttr("checked")),0<o.length?(r.style.display="none",$(".epet_sensor_settlement").css("background","#459d36"),$(".baoyou-tip").css("display","block"),$(".shengcheng").find("a").css({visibility:"visible"})):(r.style.display="block",$(".epet_sensor_settlement").css("background","#b1b1b1"),$(".baoyou-tip").css("display","none"),$(".shengcheng").find("a").css({visibility:"hidden"}));var e=0,n=0;for(t=0;t<o.length;t++)n+=1*$(".buynum ").eq(o[t]).val(),e+=1*$(".ee").eq(o[t]).text().substring(1);$(".current").html("E宠购物车"+n),$(".epet_sensor_settlement").html("去结算("+n+")"),$(".cart-price strong").html("￥"+e.toFixed(2))}$(".all-checkbox,.shopmi").on("click",function(){$(this).prop("checked")?($(".chk").prop("checked","checked"),$(".shopmi").prop("checked","checked")):$(".chk").removeAttr("checked"),l()}),$(".xzs").on("click",function(){if(confirm("您真的不要我了吗"))for(var t=o.length;0<=t;t--){var e=$(this).parents("tfoot").prev().children("tr").attr("id");console.log(e),$("#miid tr").eq(o[t]).remove(),$.ajax({type:"post",data:{APItype:"orderCarDelete",id:e},url:"../api/cart.php"}),s(),l()}})});